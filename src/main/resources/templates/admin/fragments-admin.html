<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:fragment="page_head(title)">
    <meta charset="UTF-8">
    <title>[[${title}]]</title>
    <link rel="apple-touch-icon" th:href="@{apple-icon.png}">
    <link rel="shortcut icon" th:href="@{/admin/images/favicon.ico}">

    <link rel="stylesheet" th:href="@{/admin/vendors/bootstrap/dist/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/admin/vendors/font-awesome/css/font-awesome.min.css}">
    <link rel="stylesheet" th:href="@{/admin/vendors/themify-icons/css/themify-icons.css}">
    <link rel="stylesheet" th:href="@{/admin/vendors/flag-icon-css/css/flag-icon.min.css}">
    <link rel="stylesheet" th:href="@{/admin/vendors/selectFX/css/cs-skin-elastic.css}">
    <link rel="stylesheet" th:href="@{/admin/vendors/jqvmap/dist/jqvmap.min.css}">

    <!--    css-->
    <link rel="stylesheet" th:href="@{/admin/assets/css/style.css}">
    <link rel="stylesheet" th:href="@{/admin/assets/css/index.css}">

    <!--    fontawesome-->
    <script th:src="@{https://kit.fontawesome.com/1943ac9f5b.js}" crossorigin="anonymous"></script>

    <script th:inline="javascript" th:src="@{/admin/vendors/jquery/dist/jquery.min.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/vendors/popper.js/dist/umd/popper.min.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/vendors/bootstrap/dist/js/bootstrap.min.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/assets/js/main.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/vendors/chart.js/dist/Chart.bundle.min.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/assets/js/dashboard.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/assets/js/widgets.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/vendors/jqvmap/dist/jquery.vmap.min.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/vendors/jqvmap/examples/js/jquery.vmap.sampledata.js}"></script>
    <script th:inline="javascript" th:src="@{/admin/vendors/jqvmap/dist/maps/jquery.vmap.world.js}"></script>
    <script th:inline="javascript" th:src="@{https://unpkg.com/sweetalert/dist/sweetalert.min.js}"></script>
    <script th:inline="javascript">
        /* Bạn có thể giữ nguyên đoạn mã JavaScript này */
        (function ($) {
            "use strict";

            jQuery('#vmap').vectorMap({
                map: 'world_en',
                backgroundColor: null,
                color: '#ffffff',
                hoverOpacity: 0.7,
                selectedColor: '#1de9b6',
                enableZoom: true,
                showTooltip: true,
                values: sample_data,
                scaleColors: ['#1de9b6', '#03a9f5'],
                normalizeFunction: 'polynomial'
            });
        })(jQuery);

        function setFileName() {
            var fileName = document.getElementById("importFile").value.split("\\").pop();
            document.querySelector(".custom-file-label").textContent = fileName;
            // alert('ádâdâdâdâd')
        }

        function uploadFile(e) {
            let fileName = document.getElementById("importFileProduct").value.split("\\").pop();
            document.querySelector(".custom-file-label").textContent = fileName;
            const files = e.target.files
            const previewImagesContainer = document.getElementById('preview-image-files');
            previewImagesContainer.innerHTML = ''
            const imageUrls = Array.from(files).map(function (file) {
                return URL.createObjectURL(file);
            });

            loadImages(imageUrls, previewImagesContainer);
        }

        function loadImages(imageUrls, previewImagesContainer) {
            for (let i = 0; i < imageUrls.length; i++) {
                const imageUrl = imageUrls[i];

                const img = document.createElement('img');
                img.src = imageUrl;
                img.classList.add('img-fluid');
                img.style.width = '100px';
                img.style.height = '100px';
                previewImagesContainer.appendChild(img);
            }
        }

        onInputText = (id) => {
            document.getElementById(id).innerHTML = ''
        }

        checkName = (name, errorName) => {
            let isName = document.getElementById(name).value
            debugger
            if (isName.trim() === '') {
                document.getElementById(errorName).innerHTML = `Chưa nhập tên`
                return false;
            }
            return true;
        }

        function clickAdd(entity, id, name, errorName) {
            if (checkName(name, errorName)) {
                swal({
                    title: "Thêm dữ liệu",
                    text: "Bạn có muốn thêm dữ liệu không ?",
                    icon: "warning",
                    buttons: ["Không", "Có"],
                    dangerMode: true,
                    closeOnClickOutside: false,
                }).then((add) => {
                    if (add) {
                        document.getElementById(id).action = '/nova/' + entity + '/add'
                        document.getElementById(id).method = 'post'
                        document.getElementById(id).submit()
                        // swal("Thêm dữ liệu thành công", {
                        //     icon: "success",
                        // })
                    }
                });
            }
        }

        function validateFile(id, errorName) {
            let fileInput = document.getElementById(id);
            let file = fileInput.files;
            debugger
            if (file.length === 0) {
                document.getElementById(errorName).innerHTML = `Vui lòng chọn ảnh`
                return false;
            }
            if (file[0].size > 1024 * 1024) {
                document.getElementById(errorName).innerHTML = `Kích thước file không vượt quá 1MB`
                return false;
            }
            return true;
        }

        function clickUpdate(id, name, errorName) {
            if (checkName(name, errorName)) {
                swal({
                    title: "Sửa dữ liệu",
                    text: "Bạn có muốn sửa dữ liệu không ?",
                    icon: "warning",
                    buttons: ["Không", "Có"],
                    dangerMode: true,
                    closeOnClickOutside: false,
                }).then((update) => {
                    if (update) {
                        document.getElementById(id).submit()
                    }
                });
            }
        }

        function clickDelete(entity, id, entityId) {
            swal({
                title: "Xóa dữ liệu",
                text: "Bạn có muốn xóa dữ liệu không ?",
                icon: "warning",
                buttons: ["Không", "Có"],
                dangerMode: true,
                closeOnClickOutside: false,
            }).then((deleted) => {
                if (deleted) {
                    document.getElementById(id).action = '/nova/' + entity + "/delete/" + entityId
                    document.getElementById(id).method = 'post'
                    document.getElementById(id).submit()
                }
            });
        }

        function importExcel(id) {
            let excel = confirm("Bạn có muốn thêm file excel ?")
            if (excel) {
                console.log('binh tinh')
                document.getElementById(id).method = 'post'
                document.getElementById(id).submit()
            } else {
                return null
            }
        }

        function clickSearch(entity, id) {
            document.getElementById(id).action = '/nova/' + entity + '/search'
            document.getElementById(id).method = 'get'
            document.getElementById(id).submit()
        }

    </script>

    <link th:href='@{https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800}' rel='stylesheet'
          type='text/css'>
</head>
<body>

</body>
</html>