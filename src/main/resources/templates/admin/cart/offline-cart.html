<!--
  ~  © 2023 Nyaruko166
  -->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{admin/admin-layout.html}">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div layout:fragment="content">
    <div class="container mt-5 p-3 rounded cart">
        <div class="row">
            <div class="col-7">
                <div class="row no-gutters">
                    <div class="col-md-12">
                        <div class="product-details" style="padding: 0">
                            <div class="topnav">
                                <a th:each="y:${lstBill}" class="border border-3 rounded"
                                   th:href="${'/nova/pos?billId='+y.billId}" th:text="${'Hoá Đơn '+ y.billIdPP()}"></a>
                                <div style="float: right; margin-top: 12px">
                                    <button onclick="location.href='/nova/pos/removeBill'" class="btn btn-dark"
                                            type="button" data-toggle="tooltip" data-placement="top"
                                            title="Huỷ hoá đơn hiện tại">
                                        <i class="fa-regular fa-trash-can" style="color: #ffffff;"></i>
                                    </button>
                                    <button onclick="location.href='/nova/pos/newBill'" type="button"
                                            class="btn btn-dark" data-toggle="tooltip" data-placement="top"
                                            title="Tạo hoá đơn mới"><i
                                            class="fa-regular fa-square-plus" style="color: #ffffff;"></i></button>
                                    <button onclick="init()" class="btn btn-dark" type="button" data-toggle="collapse"
                                            data-target="#collapseExample" aria-expanded="false"
                                            aria-controls="collapseExample" id="qr-toggle"
                                    >
                                        <i class="fa-solid fa-qrcode" style="color: #ffffff;"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <h6 class="mb-0" th:text="'Hoá đơn ' + ${session.posBill.billIdPP()}"></h6>
                        <div id="output">
                            <div class="d-flex justify-content-between"><span
                                    th:text="${'You have ' + lstCart.size() + ' items in your cart'}"></span>
                                <div class="d-flex flex-row align-items-center"><span
                                        class="text-black-50">Sort by:</span>
                                    <div class="price ml-2"><span class="mr-1">price</span><i
                                            class="fa fa-angle-down"></i>
                                    </div>
                                </div>
                            </div>

                            <div th:each="x:${lstCart}"
                                 class="d-flex justify-content-between align-items-center mt-3 p-2 items rounded">
                                <div class="d-flex flex-row"><img class="rounded"
                                                                  th:src="@{'/image/product/'+${x.idSP}}"
                                                                  width="40">
                                    <div class="ml-2"><span th:text="${x.name}"
                                                            class="font-weight-bold d-block"></span><span
                                            class="spec" th:text="${x.fieldCombine()}"></span></div>
                                </div>
                                <div class="d-flex flex-row align-items-center"><span th:text="${x.qty}"
                                                                                      class="d-block"></span><span
                                        th:text="${x.calTotalPrice() + ' VNĐ'}"
                                        class="d-block ml-5 font-weight-bold"></span>
                                    <a th:href="@{'/nova/pos/remove/' + ${x.codeCtsp}}" class="trash"><i
                                            class="fa fa-trash-o ml-3 text-black-50"></i></a>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-5">
                <div id="output_checkout">
                    <div class="col-md-12">
                        <div class="col-md-12">
                            <div class="card mb-4">
                                <div class="card-header py-3">
                                    <div class="row">
                                        <div class="col-6">
                                            <h5 class="mb-0">Tổng hoá đơn</h5>
                                        </div>
                                        <div class="col-6 text-right">
                                            <button type="button" class="btn btn-dark" data-toggle="modal"
                                                    data-target="#exampleModalCenter">
                                                <i class="fa-regular fa-user" style="color: #ffffff;"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <ul class="list-group list-group-flush">
                                        <li
                                                class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                                            Products
                                            <span th:text="${tempBill.totalCartPrice != null} ? ${tempBill.totalCartPrice} +' VNĐ' : '0' +' VNĐ'"></span>
                                        </li>
                                        <!--                                        <li class="list-group-item d-flex justify-content-between align-items-center px-0">-->
                                        <!--                                            Shipping-->
                                        <!--                                            <span>Gratis</span>-->
                                        <!--                                        </li>-->
                                        <li
                                                class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 mb-3">
                                            <div>
                                                <strong>Tổng tiền</strong>
                                                <strong>
                                                    <p class="mb-0">(including VAT)</p>
                                                </strong>
                                            </div>
                                            <span><strong
                                                    th:text="${tempBill.totalCartPrice != null} ? ${tempBill.totalCartPrice} +' VNĐ' : '0' +' VNĐ'"></strong></span>
                                        </li>
                                    </ul>
                                    <button type="button" class="btn btn-primary btn-lg btn-block">
                                        Thanh Toán
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Tìm kiếm khách hàng</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-inline text-center">
                        <input id="keyword" class="form-control mr-sm-2" type="search" placeholder="Search"
                               aria-label="Search" oninput="searchAndReplace()" th:value="${keyword} == null ? '' : ${keyword}">
                        <!--                            <button class="btn btn-outline-success my-2 my-sm-0" type="button" onclick="searchAndReplace()">Search-->
                        <!--                            </button>-->
                    </div>
                    <div id="modal_replace">

                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <div class="collapse" id="collapseExample">
        <div class="card card-body">
            <main>
                <div id="reader"></div>
                <div id="result"></div>
            </main>
        </div>
        <script th:inline="javascript" th:src="@{/admin/assets/js/pos.js}"></script>
    </div>
</div>
</body>
</html>